import{g as Rt,h as H,i as At,j as wt,k as vt,p as Kt,l as zt,m as jt,n as Bt,o as Gt,q as Z,a as W,t as st,$ as Qt,d as g,e as d,b as J}from"../chunks/disclose-version.D7Tk3Vjj.js";import{B as Lt,K as Xt,L as $t,G as ht,U as Zt,M as Ot,b as Wt,N as Jt,O as te,H as ee,Q as Ft,R as re,t as yt,u as gt,V as k,c as L,W as xt,X as bt,m as rt,s as nt,Y as ae,Z as ne,_ as se,$ as oe,i as ie,S as ue,a0 as le,q as at,a1 as de,a2 as ve,a3 as fe,f as ce,a4 as _e,a5 as pe,a6 as be,a7 as me,A as he,e as _,v as ye,x as ge,a8 as xe,w as tt,a9 as N,aa as Ae}from"../chunks/runtime.u4pbngQj.js";import{i as we}from"../chunks/lifecycle.Bo_0nY8e.js";import{p as q}from"../chunks/proxy.DiHWA-mp.js";function De(t,e,r){let a=Zt,n;Lt(()=>{Xt(a,a=e())&&(n&&$t(n),n=ht(()=>r(t)))})}let ft=null;function Ee(t,e){return e}function Te(t,e,r){for(var a=[],n=t.length,o=0;o<n;o++)ae(t[o].e,a,!0);if(n>0&&a.length===0&&e!==null){var v=e.parentNode;zt(v),v.append(e)}ne(a,()=>{for(var p=0;p<n;p++)se(t[p].e);r!==void 0&&r()})}function Dt(t,e,r,a,n,o=null){var v={flags:e,items:new Map,next:null},p=(e&Ot)!==0;if(p){var x=t;t=H?At(x.firstChild):x.appendChild(Rt())}var f=null;Lt(()=>{var y=r(),s=Wt(y)?y:y==null?[]:Array.from(y),b=s.length,l=v.flags;l&bt&&!ie(s)&&!(ue in s)&&(l^=bt,l&le&&!(l&k)&&(l^=k));let A=!1;if(H){var c=t.data===Jt;c!==(b===0)&&(te(wt),vt(!1),A=!0)}if(H){for(var i=wt[0],h=v,D,u=0;u<b;u++){if(i.nodeType!==8||i.data!==ee){A=!0,vt(!1);break}var m=i;i=At(i);var S=s[u],w=a(S,u);D=Ht(m,i,h,null,S,w,u,n,l),v.items.set(w,D),i=i.nextSibling,h=D}if(b>0)for(;i!==t;){var T=i.nextSibling;i.remove(),i=T}}H||Ce(s,v,t,n,l,a),o!==null&&(b===0?f?Ft(f):f=ht(()=>o(t)):f!==null&&$t(f,()=>{f=null})),A&&vt(!0)})}function Ce(t,e,r,a,n,o){var K,C,M,F;var v=(n&oe)!==0,p=(n&(k|xt))!==0,x=t.length,f=e.items,y=e.next,s=y,b=new Set,l=e,A=new Set,c=[],i=[],h,D,u,m;if(v)for(m=0;m<x;m+=1)h=t[m],D=o(h,m),u=f.get(D),u!==void 0&&((K=u.a)==null||K.measure(),A.add(u));for(m=0;m<x;m+=1){if(h=t[m],D=o(h,m),u=f.get(D),u===void 0){var S=Kt(Rt()),w=s?s.o:r;w.before(S),l=Ht(S,w,l,l.next,h,D,m,a,n),f.set(D,l),c=[],i=[],s=l.next;continue}if(p&&Ie(u,h,m,n),u.e.f&re&&(Ft(u.e),v&&((C=u.a)==null||C.unfix(),A.delete(u))),u!==s){if(b.has(u)){if(c.length<i.length){var T=i[0],I;l=T.prev;var P=c[0],V=c[c.length-1];for(I=0;I<c.length;I+=1)Et(c[I],T,r);for(I=0;I<i.length;I+=1)b.delete(i[I]);O(P.prev,V.next),O(l,P),O(V,T),s=T,l=V,m-=1,c=[],i=[]}else b.delete(u),Et(u,s,r),O(u.prev,u.next),O(u,l.next),O(l,u),l=u;continue}for(c=[],i=[];s!==null&&s.k!==D;)b.add(s),i.push(s),s=s.next;if(s===null)continue;u=s}c.push(u),l=u,s=u.next}const U=Array.from(b);for(;s;)U.push(s),s=s.next;var ot=n&Ot&&x===0?r:null;if(v){for(m=0;m<U.length;m+=1)(M=U[m].a)==null||M.measure();for(m=0;m<U.length;m+=1)(F=U[m].a)==null||F.fix()}Te(U,ot,()=>{for(var E=0;E<U.length;E+=1){var B=U[E];f.delete(B.k),O(B.prev,B.next)}}),v&&yt(()=>{gt(()=>{var E;for(u of A)(E=u.a)==null||E.apply()})})}function Ie(t,e,r,a){a&k&&L(t.v,e),a&xt?L(t.i,r):t.i=r}function Ht(t,e,r,a,n,o,v,p,x){var f=ft;try{var y=(x&k)!==0,s=(x&bt)===0,b=y?s?rt(n):nt(n):n,l=x&xt?nt(v):v,A={i:l,v:b,k:o,a:null,e:null,o:t,prev:r,next:a};return r.next=A,a!==null&&(a.prev=A),ft=A,A.e=ht(()=>p(e,b,l)),A}finally{ft=f}}function Et(t,e,r){for(var a=t.next?t.next.o:r,n=e?e.o:r,o=t.o;o!==a;){var v=o.nextSibling;n.before(o),o=v}}function O(t,e){t.next=e,e!==null&&(e.prev=t)}function ct(t){if(H){const e=t.getAttribute("value");Tt(t,"value",null),Tt(t,"checked",null),e&&(t.value=e)}}function Tt(t,e,r){r=r==null?null:r+"";var a=t.__attributes??(t.__attributes={});H&&(a[e]=t.getAttribute(e),e==="src"||e==="href"||e==="srcset")||a[e]!==(a[e]=r)&&(r===null?t.removeAttribute(e):t.setAttribute(e,r))}const qt=typeof window<"u",Ne=qt?requestAnimationFrame:at,Ue=qt?()=>performance.now():()=>Date.now(),R={tick:t=>Ne(t),now:()=>Ue(),tasks:new Set};function Pt(t){R.tasks.forEach(e=>{e.c(t)||(R.tasks.delete(e),e.f())}),R.tasks.size!==0&&R.tick(Pt)}function Se(t){let e;return R.tasks.size===0&&R.tick(Pt),{promise:new Promise(r=>{R.tasks.add(e={c:t,f:r})}),abort(){R.tasks.delete(e)}}}function Me(t,e,{bubbles:r=!1,cancelable:a=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r,a,e),n}function et(t,e){t.dispatchEvent(Me(e))}function Re(t){const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Be(t){const e={},r=t.split(";");for(const a of r){const[n,o]=a.split(":");if(!n||o===void 0)break;const v=Re(n.trim());e[v]=o.trim()}return e}const Le=t=>t;function _t(t,e,r,a){var n=(t&pe)!==0,o=(t&be)!==0,v=(t&me)!==0,p=n&&o?"both":n?"in":"out",x,f=e.inert,y,s,b;function l(){return x??(x=r()(e,a==null?void 0:a(),{direction:p}))}var A={is_global:v,in(){e.inert=f,n?(et(e,"introstart"),y=mt(e,l(),s,1,()=>{et(e,"introend"),y=x=void 0})):(s==null||s.abort(),b==null||b())},out(h){o?(e.inert=!0,et(e,"outrostart"),s=mt(e,l(),y,0,()=>{et(e,"outroend"),s=x=void 0,h==null||h()}),b=s.reset):h==null||h()},stop:()=>{y==null||y.abort(),s==null||s.abort()}},c=ce;if((c.transitions??(c.transitions=[])).push(A),n&&jt){let h=v;if(!h){for(var i=c.parent;i&&i.f&de;)for(;(i=i.parent)&&!(i.f&ve););h=!i||(i.f&fe)!==0}h&&yt(()=>{gt(()=>A.in())})}}function mt(t,e,r,a,n){if(_e(e)){var o;return yt(()=>{var w=gt(()=>e({direction:a===1?"in":"out"}));o=mt(t,w,r,a,n)}),{abort:()=>o.abort(),deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:w=>o.t(w)}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return n==null||n(),{abort:at,deactivate:at,reset:at,t:()=>a};var{delay:v=0,duration:p,css:x,tick:f,easing:y=Le}=e,s=R.now()+v,b=(r==null?void 0:r.t(s))??1-a,l=a-b;p*=Math.abs(l);var A=s+p,c,i;if(x){for(var h=[],D=Math.ceil(p/16.666666666666668),u=0;u<=D;u+=1){var m=b+l*y(u/D),S=x(m,1-m);h.push(Be(S))}c=t.animate(h,{delay:v,duration:p,easing:"linear",fill:"forwards"}),c.finished.then(()=>{n==null||n(),a===1&&c.cancel()}).catch(w=>{if(c.startTime!==null&&c.currentTime!==null)throw w})}else b===0&&(f==null||f(0,1)),i=Se(w=>{if(w>=A)return f==null||f(a,1-a),n==null||n(),!1;if(w>=s){var T=b+l*y((w-s)/p);f==null||f(T,1-T)}return!0});return{abort:()=>{c==null||c.cancel(),i==null||i.abort()},deactivate:()=>{n=void 0},reset:()=>{a===0&&(f==null||f(1,0))},t:w=>{var T=b+l*y((w-s)/p);return Math.min(1,Math.max(0,T))}}}let Ct=!1;function $e(t,e,r,a=r){t.addEventListener(e,r);const n=t.__on_r;n?t.__on_r=()=>{n(),a()}:t.__on_r=a,Ct||(Ct=!0,document.addEventListener("reset",o=>{Promise.resolve().then(()=>{var v;if(!o.defaultPrevented)for(const p of o.target.elements)(v=p.__on_r)==null||v.call(p)})},{capture:!0}))}function pt(t,e,r){$e(t,"input",()=>{r(It(t)?Nt(t.value):t.value)}),he(()=>{var a=e();t.__value=a,!(It(t)&&a===Nt(t.value))&&(t.type==="date"&&!a&&!t.value||(t.value=Bt(a)))})}function It(t){var e=t.type;return e==="number"||e==="range"}function Nt(t){return t===""?null:+t}function Ut(t,e){const r=t.debtors.get(e);if(!r)return 0;const a=t.totalAmount;let n=0;for(const[,o]of t.debtors)n+=o.dayCount;return n===0?0:a/n*r.dayCount}function Oe(){let t=nt(q(new Map([[crypto.randomUUID(),{name:"Bách"}],[crypto.randomUUID(),{name:"Cường"}],[crypto.randomUUID(),{name:"Hoàng"}],[crypto.randomUUID(),{name:"Khoa"}],[crypto.randomUUID(),{name:"Long"}],[crypto.randomUUID(),{name:"Thịnh"}],[crypto.randomUUID(),{name:"Thuận"}],[crypto.randomUUID(),{name:"Tuyến"}]])));return{get debtors(){return _(t)},getDebtorName(e){const r=_(t).get(e);return r?r.name:"[Debtor not exists]"},createDebtor({name:e}){if(e){for(const[,r]of _(t))if(r.name===e)return;L(t,q(new Map([..._(t),[crypto.randomUUID(),{name:e}]])))}},deleteDebtor(e){_(t).has(e)&&(_(t).delete(e),L(t,q(new Map([..._(t)]))))}}}function Fe(){let t=nt(q({debtors:new Map,totalAmount:0}));return{get bill(){return _(t)},get debtors(){return _(t).debtors},get totalAmount(){return _(t).totalAmount},addDebtorToBill(e){_(t).debtors.has(e)||L(t,q({..._(t),debtors:new Map([..._(t).debtors,[e,{dayCount:0,amount:0}]])}))},removeDebtorFromBill(e){_(t).debtors.has(e)&&(_(t).debtors.delete(e),L(t,q({..._(t),debtors:new Map([..._(t).debtors])})))}}}const He=t=>t;function qe(t){const e=t-1;return e*e*e+1}function St(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Pe(t,{delay:e=0,duration:r=400,easing:a=He}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:a,css:o=>`opacity: ${o*n}`}}function Mt(t,{delay:e=0,duration:r=400,easing:a=qe,x:n=0,y:o=0,opacity:v=0}={}){const p=getComputedStyle(t),x=+p.opacity,f=p.transform==="none"?"":p.transform,y=x*(1-v),[s,b]=St(n),[l,A]=St(o);return{delay:e,duration:r,easing:a,css:(c,i)=>`
			transform: ${f} translate(${(1-c)*s}${b}, ${(1-c)*l}${A});
			opacity: ${x-y*i}`}}var Ve=st('<div class="card card-side bg-base-100 m-1 w-[20rem] border border-primary shadow-xl"><figure><img src="https://img.daisyui.com/images/stock/photo-1635805737707-575885ab0820.jpg" alt="Avatar"></figure> <div class="card-body p-2 text-center"><h2 class="card-title text-info justify-center"> </h2> <p>Con nợ</p> <div class="card-actions justify-center"><button class="btn btn-outline btn-primary w-32">Add To Bill</button> <button class="btn btn-outline btn-error w-32">Delete Debtor</button></div></div></div>'),Ye=st("<td> </td>"),ke=st('<tr><th> </th><td><div class="avatar"><div class="w-16 rounded-full"><img src="https://img.daisyui.com/images/stock/photo-1635805737707-575885ab0820.jpg" alt="Avatar"></div></div></td><td> </td><td><input class="input" type="number" min="0"></td><!><td><button class="btn btn-outline btn-error">Remove From Bill</button></td></tr>'),Ke=st('<main><div tabindex="0" class="collapse-arrow bg-base-200 collapse"><input type="checkbox"> <h1 class="collapse-title text-3xl font-bold text-primary">Debtors</h1> <div class="collapse-content"><div class="flex flex-wrap"><!> <div class="card card-side bg-base-100 border-success m-1 w-[20rem] border shadow-xl"><figure><img src="https://img.daisyui.com/images/stock/photo-1635805737707-575885ab0820.jpg" alt="Avatar"></figure> <div class="card-body p-2 text-center"><h2 class="card-title justify-center"><input class="w-44 text-center" type="text" placeholder="New debtor name"></h2> <p></p> <div class="card-actions justify-center"><button class="btn btn-outline btn-success w-32">New Debtor</button></div></div></div></div></div></div> <div tabindex="0" class="collapse-arrow bg-base-200 collapse"><input type="checkbox"> <h1 class="collapse-title text-3xl font-bold text-primary">Bill</h1> <div class="collapse-content"><p class="text-info text-xl">Total amount: <input class="input text-xl" type="number" min="0"> VND</p> <div class="overflow-hidden overflow-x-auto"><table class="table text-xl"><thead class="text-xl"><tr><th></th><th>Avatar</th><th>Name</th><th>Days</th><th>Pay</th><th>Remove</th></tr></thead><tbody></tbody></table></div></div></div></main>');function Xe(t,e){ye(e,!1);const r=rt(Oe()),a=rt(Fe());let n=rt("");we();var o=Ke();Gt(C=>{Qt.title="Bills Calculator"});var v=g(o),p=g(v),x=d(d(p,!0)),f=d(d(x,!0)),y=g(f),s=g(y);Dt(s,1,()=>Array.from(_(r).debtors),Ee,(C,M,F)=>{let E=()=>N(N(M))[0],B=()=>N(N(M))[1];var $=Ve();_t(3,$,()=>Mt,()=>({y:10}));var z=g($),it=d(d(z,!0)),j=g(it),G=g(j),ut=d(d(j,!0)),Q=d(d(ut,!0)),Y=g(Q),X=d(d(Y,!0));tt(()=>J(G,B().name)),Z("click",Y,()=>_(a).addDebtorToBill(E()),!1),Z("click",X,()=>_(r).deleteDebtor(E()),!1),W(C,$)});var b=d(d(s,!0)),l=g(b),A=d(d(l,!0)),c=g(A),i=g(c);ct(i);var h=d(d(c,!0)),D=d(d(h,!0)),u=g(D),m=d(d(v,!0)),S=g(m),w=d(d(S,!0)),T=d(d(w,!0)),I=g(T),P=d(g(I));ct(P);var V=d(d(I,!0)),U=g(V),ot=g(U),K=d(ot);Dt(K,15,()=>Array.from(_(a).debtors),(C,M)=>N(N(C))[0],(C,M,F)=>{let E=()=>N(N(M))[0],B=()=>N(N(M))[1];var $=ke();_t(3,$,()=>Mt,()=>({y:10}));var z=g($),it=g(z),j=d(z),G=d(j),ut=g(G);tt(()=>J(ut,_(r).getDebtorName(E())));var Q=d(G),Y=g(Q);ct(Y);var X=d(Q);De(X,()=>Math.round(Ut(_(a).bill,E())),lt=>{var dt=Ye();_t(1,dt,()=>Pe);var kt=g(dt);tt(()=>J(kt,`${Bt(Math.round(Ut(_(a).bill,E())))} VND`)),W(lt,dt)});var Vt=d(X),Yt=g(Vt);tt(()=>J(it,N(F)+1)),pt(Y,()=>B().dayCount,lt=>(B().dayCount=lt,Ae(()=>Array.from(_(a).debtors)))),Z("click",Yt,()=>_(a).removeDebtorFromBill(E()),!1),W(C,$)}),pt(i,()=>_(n),C=>L(n,C)),Z("click",u,()=>{_(r).createDebtor({name:_(n)}),L(n,"")},!1),pt(P,()=>_(a).bill.totalAmount,C=>xe(a,_(a).bill.totalAmount=C)),W(t,o),ge()}export{Xe as component};
